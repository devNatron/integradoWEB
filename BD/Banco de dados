CREATE TABLE instituicao(
	sigla varchar(10),
	nome_instituicao varchar(55) NOT NULL,
	natureza_administrativa varchar(7) CHECK (natureza_administrativa IN ('Pública', 'Privada')),
	
	PRIMARY KEY(sigla)
);

CREATE TABLE campus(
    nome_campus varchar(55) NOT NULL,
    estado char(2) NOT NULL CHECK (estado IN ('AC', 'AL', 'AP', 'AM', 'BA', 'CE', 'DF', 'ES', 'GO', 'MA', 'MT', 'MS', 'MG', 'PA', 'PB', 'PR', 'PE', 'PI', 'RJ', 'RN', 'RS', 'RO', 'RR', 'SC', 'SP', 'SE', 'TO')),
    cidade varchar(55) NOT NULL,
    sigla_instituicao varchar(10),
    
    PRIMARY KEY(sigla_instituicao, nome_campus),
    FOREIGN KEY(sigla_instituicao) REFERENCES instituicao(sigla) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE curso(
    nome_curso varchar(55) NOT NULL,
    grau varchar(12) NOT NULL CHECK (grau IN ('Bacharelado', 'Licenciatura', 'Mestrado', 'Doutorado', 'Tecnólogo')),
    turno varchar(10) NOT NULL CHECK (turno IN ('Matutino', 'Integral', 'Noturno', 'Vespertino')),
    duracao smallint NOT NULL CHECK (duracao > 0 AND duracao <= 12),
    ano_criacao smallint NOT NULL CHECK (ano_criacao <= DATE_PART('YEAR', CURRENT_DATE) AND ano_criacao > 1980),
    nome_campus varchar(55) NOT NULL,
    sigla_instituicao varchar(10) NOT NULL,

    PRIMARY KEY(sigla_instituicao, nome_campus, nome_curso),
    FOREIGN KEY (sigla_instituicao, nome_campus) REFERENCES campus(sigla_instituicao, nome_campus) ON DELETE CASCADE ON UPDATE CASCADE
);

